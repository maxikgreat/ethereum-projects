{"version":3,"file":"static/webpack/static/development/pages/campaigns/[campaign_id].js.85b08962e9556a43bf70.hot-update.js","sources":["webpack:///./components/ContributeForm.js","webpack:///./pages/campaigns/[campaign_id].js"],"sourcesContent":["import React, {Component} from 'react';\nimport {Form, Input, Message, Button} from 'semantic-ui-react';\nimport {campaignCreate} from '../ethereum/campaign';\nimport web3 from '../ethereum/web3';\nimport Router from 'next/router';\n\nexport default class ContributeForm extends Component {\n\n    state = {\n        value: '',\n        loading: false,\n        errorMessage: ''\n    };\n\n    onContribute = async (e) => {\n        e.preventDefault();\n\n        const campaign = campaignCreate(this.props.address);\n\n        this.setState({\n            loading: true,\n            errorMessage: ''\n        });\n\n        try {\n            const accounts = await web3.eth.getAccounts();\n            await campaign.methods.contribute().send({\n                from: accounts[0],\n                value: web3.utils.toWei(formState.value, 'ether')\n            })\n            Router.replace(`/campaigns/${this.props.address}`)\n        } catch(e) {\n            this.setState({\n                errorMessage: e.message\n            })\n        }\n\n        this.setState({\n            loading: false,\n            value: ''\n        })\n    };\n\n    render() {\n        return(\n            <Form onSubmit={this.onContribute} error={!!this.state.errorMessage}>\n                <Form.Field>\n                    <label>Amount to Contribute</label>\n                    <Input \n                        value={this.state.value}\n                        onChange={e => this.setState({\n                            value: e.target.value\n                        })}\n                        label=\"ether\"\n                        labelPosition=\"right\"\n                    />\n                </Form.Field>\n                <Message error header=\"Ooops!\" content={this.state.errorMessage} />\n                <Button \n                    primary\n                    disabled={this.state.loading}\n                    loading={this.state.loading}\n                >\n                    Contribute!\n                </Button>\n            </Form>\n        )\n    }\n};","import React, {Component} from 'react';\nimport {campaignCreate} from '../../ethereum/campaign';\nimport web3 from '../../ethereum/web3';\nimport {Card, Grid} from 'semantic-ui-react';\nimport {withRouter} from 'next/router';\nimport {Layout} from '../../components/Layout';\nimport ContributeForm from '../../components/ContributeForm';\n\nexport async function getServerSideProps(content) {\n    const {campaign_id} = content.query;\n    const campaign = campaignCreate(campaign_id); // address\n    \n    const summary = await campaign.methods.getSummary().call();\n\n    return {props: {\n        address: campaign_id,\n        minimumContribution: summary[0],\n        balance: summary[1],\n        requestsCount: summary[2],\n        approversCount: summary[3],\n        manager: summary[4]\n    }}\n}\n\nclass CampaignShow extends Component {\n    renderCards() {\n        const {\n            minimumContribution, \n            balance,\n            requestsCount,\n            approversCount,\n            manager\n        } = this.props;\n\n        const items = [\n            {\n                header: manager,\n                meta: 'Address of manager',\n                description: 'The manager created this campaign and can create requests to withdraw money',\n                style: {overflowWrap: 'break-word'}\n            },\n            {\n                header: minimumContribution,\n                meta: 'Minimum Contribution (wei)',\n                description: 'You must contribute at least this much wei to become an approver'\n            },\n            {\n                header: requestsCount,\n                meta: 'Number of Requests',\n                description: 'A request tries to withdraw money from the contract. Request must be approved by approvers'\n            },\n            {\n                header: approversCount,\n                meta: 'Number of Approvers',\n                description: 'Number of people you have already donated to this Campaign'\n            },\n            {\n                header: web3.utils.fromWei(balance, 'ether'),\n                meta: 'Campaign Balance (ether)',\n                description: 'The balance is how much money this campaign has left to spend'\n            }\n        ]\n\n        return <Card.Group items={items} />\n    }\n\n    render(){\n        return(\n            <Layout>\n                <h2 className=\"ui header\">Campaign details</h2>\n                <Grid>\n                    <Grid.Column width={10}>\n                        {this.renderCards()}\n                    </Grid.Column>\n                    <Grid.Column width={6}>\n                        <ContributeForm \n                            address={this.props.address}\n                        />\n                    </Grid.Column>\n                </Grid>\n            </Layout>   \n        )\n    }\n};\n\nexport default withRouter(CampaignShow);"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AAHA;AACA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AAFA;AACA;AANA;AAAA;AAAA;AACA;AADA;AAWA;AAXA;AAAA;AAaA;AACA;AAFA;AACA;AAbA;AAgBA;AAhBA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAiBA;AACA;AADA;AACA;AAnBA;AAuBA;AACA;AACA;AAFA;AACA;AAxBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;AA4BA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AADA;AAAA;AAGA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;;;;AA7DA;AACA;AADA;AA8DA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAiBA;;;;;;;;;;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAJA;AAOA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;;;;AA1DA;AACA;AA0DA;;AAEA;;;;A","sourceRoot":""}