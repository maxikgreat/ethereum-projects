{"version":3,"file":"static/webpack/static/development/pages/campaigns/[campaign_id].js.43f462094c547fd20674.hot-update.js","sources":["webpack:///./components/ContributeForm.js"],"sourcesContent":["import React, {useState} from 'react';\nimport {Form, Input, Message, Button} from 'semantic-ui-react';\nimport {campaignCreate} from '../ethereum/campaign';\nimport web3 from '../ethereum/web3';\nimport Router from 'next/router';\n\nexport const ContributeForm = ({address}) => {\n\n    const [formState, formChangeState] = useState({\n        value: '',\n        loading: false,\n        errorMessage: ''\n    });\n\n    const onContribute = async (e) => {\n        e.preventDefault();\n\n        const campaign = campaignCreate(address);\n\n        formChangeState({\n            ...formState,\n            loading: true,\n            errorMessage: ''\n        });\n\n        try {\n            const accounts = await web3.eth.getAccounts();\n            \n            await campaign.methods.contribute().send({\n                from: accounts[0],\n                value: web3.utils.toWei(formState.value, 'ether')\n            })\n            Router.replace(`/campaigns/${address}`)\n        } catch(e) {\n            formChangeState({\n                formState,\n                errorMessage: e.message\n            })\n        }\n\n        formChangeState({\n            ...formState,\n            loading: false,\n            value: ''\n        })\n    };\n\n    return(\n        <Form onSubmit={(e) => onContribute(e)} error={!!formState.errorMessage}>\n            <Form.Field>\n                <label>Amount to Contribute</label>\n                <Input \n                    value={formState.value}\n                    onChange={e => formChangeState({\n                        ...formState,\n                        value: e.target.value\n                    })}\n                    label=\"ether\"\n                    labelPosition=\"right\"\n                />\n            </Form.Field>\n            <Message error header=\"Ooops!\" content={formState.errorMessage} />\n            <Button \n                primary\n                disabled={formState.loading}\n                loading={formState.loading}\n            >\n                Contribute!\n            </Button>\n        </Form>\n    )\n};"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AAAA;AACA;AADA;AAGA;AACA;AACA;AAHA;AAFA;AAAA;AACA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAEA;AAEA;AACA;AAHA;AALA;AAAA;AAAA;AACA;AADA;AAYA;AAZA;AAAA;AAeA;AACA;AAFA;AACA;AAfA;AAkBA;AAlBA;AAAA;AACA;AADA;AAAA;AAAA;AAoBA;AACA;AACA;AAFA;AACA;AArBA;AA0BA;AAEA;AACA;AAHA;AACA;AA3BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAgCA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAEA;AAFA;AAAA;AAIA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;;;;A","sourceRoot":""}