{"version":3,"file":"static/webpack/static/development/pages/campaigns/[campaign_id]/requests/new.js.bc5732119f55fa87163f.hot-update.js","sources":["webpack:///./pages/campaigns/[campaign_id]/requests/new.js"],"sourcesContent":["import React, {Component} from 'react';\nimport web3 from '../../../../ethereum/web3';\nimport {Form, Button, Message, Input} from 'semantic-ui-react';\nimport Link from 'next/link'\nimport Router from 'next/router';\nimport { Layout } from '../../../../components/Layout';\nimport { campaignCreate } from '../../../../ethereum/campaign';\n\nexport async function getServerSideProps(content) {\n    const {campaign_id} = content.query;\n    return {props: {campaign_id}}\n}\n\nexport default class RequestNew extends Component {\n    state = {\n        description: '',\n        value: '',\n        recipient: '',\n        loading: false,\n        errorMessage: ''\n    }\n\n    onCreateRequest = async (e) => {\n        e.preventDefault();\n\n        const campaign = campaignCreate(this.props.campaign_id);\n\n        const {description, value, recipient} = this.state;\n\n        this.setState({\n            loading: true,\n            errorMessage: ''\n        })\n\n        try{\n            const accoutns = await web3.eth.getAccounts();\n\n            await campaign.methods.createRequest(\n                description,\n                web3.utils.toWei(value, 'ether'),\n                recipient\n            ).send({from: accoutns[0]});\n\n            Router.push(`/campaigns/${this.props.address}/requests`);\n        } catch(e) {\n            this.setState({\n                errorMessage: e.message\n            })\n        }\n\n        this.setState({\n            loading: false\n        })\n    }\n\n    render() {\n        return(\n            <Layout>\n                <Button primary onClick={Router.back()}>Back</Button>\n                <h3>Create a Request</h3>\n                <Form onSubmit={this.onCreateRequest} error={!!this.state.errorMessage}>\n                    <Form.Field>\n                        <label>Description</label>\n                        <Input \n                            value={this.state.description}\n                            onChange={e => this.setState({\n                                description: e.target.value\n                            })}\n                        />\n                    </Form.Field>\n                    <Form.Field>\n                        <label>Value in Ether</label>\n                        <Input \n                            value={this.state.value}\n                            onChange={e => this.setState({\n                                value: e.target.value\n                            })}\n                        />\n                    </Form.Field>\n                    <Form.Field>\n                        <label>Recipient</label>\n                        <Input \n                            value={this.state.recipient}\n                            onChange={e => this.setState({\n                                recipient: e.target.value\n                            })}\n                        />\n                    </Form.Field>\n                    <Message error header=\"Ooops!\" content={this.state.errorMessage} />\n                    <Button \n                        primary\n                        loading={this.state.loading}\n                        disabled={this.state.loading}\n                    >Create!</Button>\n                </Form>\n            </Layout>\n        )\n    }\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAMA;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AACA;AAOA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAEA;AAHA;AACA;AAMA;AACA;AACA;AAFA;AACA;AARA;AAAA;AAAA;AACA;AADA;AAaA;AAbA;AAAA;AAmBA;AAAA;AACA;AApBA;AAqBA;AArBA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAsBA;AACA;AADA;AACA;AAxBA;AA4BA;AACA;AADA;AACA;AA7BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;AAgCA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AADA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AADA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AADA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;;;;AApFA;AACA;;;;;;A","sourceRoot":""}