{"version":3,"file":"static/webpack/static/development/pages/campaigns/[campaign_id]/requests.js.d69a43cfc3d8e01c40d0.hot-update.js","sources":["webpack:///./pages/campaigns/[campaign_id]/requests/index.js"],"sourcesContent":["import React, {Component} from 'react';\nimport {Button, Table} from 'semantic-ui-react';\nimport Link from 'next/link';\nimport {Layout} from '../../../../components/Layout';\nimport RequestRow from '../../../../components/RequestRow';\nimport {campaignCreate} from '../../../../ethereum/campaign';\n\nexport async function getServerSideProps(content) {\n    const {campaign_id} = content.query;\n    const campaign = campaignCreate(campaign_id);\n    const requestCount = await campaign.methods.getRequestsCount().call();\n\n    const requests = await Promise.all(\n        Array(parseInt(requestCount))\n        .fill().map((element, index) => {\n            return campaign.methods.requests(index).call()\n        })\n    );\n\n    const approversCount = await campaign.methods.approversCount().call();\n\n    return {props: {\n        campaign_id,\n        requests: JSON.parse(JSON.stringify(requests)),\n        approversCount\n    }}\n}\n\nexport default class RequestIndex extends Component {\n\n    renderRows() {\n        return this.props.requests.map((request, index) => {\n            return <RequestRow \n                key={index}\n                id={index}\n                request={request}\n                address={this.props.campaign_id}\n                approversCount={this.props.approversCount}\n            />;\n        })\n    }\n\n    render() {\n        const {Header, Row, HeaderCell, Body} = Table;\n\n        return(\n            <Layout>\n                <h3>Requests</h3>\n                <Link\n                    href=\"/campaigns/[campaign_id]/requests/new\"\n                    as={`/campaigns/${this.props.campaign_id}/requests/new`}\n                >\n                    <a>\n                        <Button primary>New Request</Button>\n                    </a>\n                </Link>\n                <Table>\n                    <Header>\n                        <Row>\n                            <HeaderCell>ID</HeaderCell>\n                            <HeaderCell>Description</HeaderCell>\n                            <HeaderCell>Amount</HeaderCell>\n                            <HeaderCell>Recipient </HeaderCell>\n                            <HeaderCell>Approval Count</HeaderCell>\n                            <HeaderCell>Approve</HeaderCell>\n                            <HeaderCell>Finalize</HeaderCell>\n                        </Row>\n                    </Header>\n                    <Body>\n                        {this.renderRows()}\n                    </Body>\n                </Table>\n            </Layout>\n        )\n    }\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAuBA;;;;;;;;;;;;;AAEA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;;;;AA9CA;AACA;;;;;;A","sourceRoot":""}